{% load static %}
<!DOCTYPE html>
<html lang="ru" data-theme="newyear">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÑ SuRam - –ù–æ–≤–∞—è –ø—Ä–æ–¥–∞–∂–∞</title>

    <!-- Icons -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@700&family=Inter:wght@300;400;500;600;700&display=swap"
          rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/theme.css' %}">
</head>

<body data-theme="newyear">

<!-- Background -->
<div class="newyear-bg"></div>
<div class="snowflakes" id="snowflakes"></div>

<!-- NAVBAR -->
<nav class="navbar">
    <div class="container nav-container">
        <a href="{% url 'dashboard' %}" class="logo">
            <div class="logo-icon">üéÑ</div>
            <div class="logo-text">SuRam <span class="year">2025</span></div>
        </a>

        <div class="desktop-menu">
            <ul class="nav-list">
                <li><a href="{% url 'dashboard' %}" class="nav-link"><i class="fas fa-home"></i> –ì–ª–∞–≤–Ω–∞—è</a></li>
                <li><a href="{% url 'products:list' %}" class="nav-link"><i class="fas fa-boxes"></i> –¢–æ–≤–∞—Ä—ã</a></li>
                <li><a href="{% url 'sales:list' %}" class="nav-link active"><i class="fas fa-shopping-cart"></i> –ü—Ä–æ–¥–∞–∂–∏</a></li>
                <li><a href="{% url 'reports:profit' %}" class="nav-link"><i class="fas fa-chart-pie"></i> –û—Ç—á—ë—Ç—ã</a></li>
                <li class="nav-dropdown">
                    <button class="nav-link nav-dropdown-toggle" type="button" data-dropdown-toggle>
                        <i class="fas fa-ellipsis-h"></i> –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
                    </button>
                    <div class="nav-dropdown-menu" data-dropdown-menu>
                        <a href="{% url 'about' %}" class="dropdown-link">
                            <i class="fas fa-circle-info"></i> –û –Ω–∞—Å
                        </a>
                        <div class="dropdown-section">
                            <div class="theme-switch" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã">
                                <button type="button" class="theme-switch-btn" data-theme-value="light">
                                    <i class="fas fa-sun"></i> –°–≤–µ—Ç–ª–∞—è
                                </button>
                                <button type="button" class="theme-switch-btn" data-theme-value="newyear">
                                    <i class="fas fa-moon"></i> –¢—ë–º–Ω–∞—è
                                </button>
                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <a href="{% url 'sales:create' %}" class="btn btn-danger">
                        <i class="fas fa-bolt"></i> –ù–æ–≤–∞—è –ø—Ä–æ–¥–∞–∂–∞
                    </a>
                </li>
            </ul>
        </div>

        <div class="mobile-menu">
            <button class="theme-toggle-mobile" id="themeToggleMobile">
                <i class="fas fa-palette"></i>
            </button>
            <button class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </div>
</nav>

<div class="mobile-drawer-backdrop" data-drawer-backdrop></div>
<div class="mobile-drawer" id="mobileDrawer">
    <div class="mobile-drawer-header">
        <div class="mobile-drawer-title">–ú–µ–Ω—é</div>
        <button type="button" class="mobile-drawer-close" data-drawer-close aria-label="–ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é">&times;</button>
    </div>
    <div class="mobile-drawer-nav">
        <a href="{% url 'dashboard' %}" class="nav-link"><i class="fas fa-home"></i> –ì–ª–∞–≤–Ω–∞—è</a>
        <a href="{% url 'products:list' %}" class="nav-link"><i class="fas fa-boxes"></i> –¢–æ–≤–∞—Ä—ã</a>
        <a href="{% url 'sales:list' %}" class="nav-link"><i class="fas fa-shopping-cart"></i> –ü—Ä–æ–¥–∞–∂–∏</a>
        <a href="{% url 'reports:profit' %}" class="nav-link"><i class="fas fa-chart-pie"></i> –û—Ç—á—ë—Ç—ã</a>
        <a href="{% url 'about' %}" class="nav-link"><i class="fas fa-circle-info"></i> –û –Ω–∞—Å</a>
        <a href="{% url 'sales:create' %}" class="btn btn-danger"><i class="fas fa-bolt"></i> –ù–æ–≤–∞—è –ø—Ä–æ–¥–∞–∂–∞</a>
        <div class="dropdown-section">
            <div class="theme-switch" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã">
                <button type="button" class="theme-switch-btn" data-theme-value="light">
                    <i class="fas fa-sun"></i> –°–≤–µ—Ç–ª–∞—è
                </button>
                <button type="button" class="theme-switch-btn" data-theme-value="newyear">
                    <i class="fas fa-moon"></i> –¢—ë–º–Ω–∞—è
                </button>
            </div>
        </div>
    </div>
</div>

<!-- MAIN -->
<main class="container">
    <div class="page-header page-header--spaced">
        <h1><i class="fas fa-bolt"></i> –ù–æ–≤–∞—è –ø—Ä–æ–¥–∞–∂–∞</h1>
    </div>

    <div class="card">
        <div class="card-header">
            <h3>–î–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏</h3>
        </div>
        <div class="card-body">
            <form method="post">
                {% csrf_token %}
                {% if form.non_field_errors %}
                    <div class="error-message">
                        <i class="fas fa-exclamation-circle"></i>
                        {{ form.non_field_errors }}
                    </div>
                {% endif %}
                <div class="form-group">
                    <label class="form-label" for="productSearchInput">–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞</label>
                    <div class="product-search">
                        <input type="text"
                               id="productSearchInput"
                               class="form-control"
                               placeholder="–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞...">
                        <button type="button" class="btn btn-secondary" id="productSearchButton">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                    <div class="suggestions-grid">
                        <div class="suggestion-group">
                            <div class="suggestion-title"><i class="fas fa-fire"></i> –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã</div>
                            <div class="suggestion-list" id="popularProducts">
                                {% for product in popular_products %}
                                    <button type="button"
                                            class="suggestion-chip"
                                            data-product-id="{{ product.id }}"
                                            data-product-name="{{ product.name }}">
                                        {{ product.name }}
                                    </button>
                                {% empty %}
                                    <span class="suggestion-empty">–ü–æ–∫–∞ –Ω–µ—Ç –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤.</span>
                                {% endfor %}
                            </div>
                        </div>
                        <div class="suggestion-group">
                            <div class="suggestion-title"><i class="fas fa-history"></i> –ù–µ–¥–∞–≤–Ω–∏–µ –ø–æ–∏—Å–∫–∏</div>
                            <div class="suggestion-list" id="recentSearches">
                                <span class="suggestion-empty" data-empty>–ü–æ–∫–∞ –Ω–µ—Ç –Ω–µ–¥–∞–≤–Ω–∏—Ö –ø–æ–∏—Å–∫–æ–≤.</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="id_product">–¢–æ–≤–∞—Ä</label>
                    {% if form.product.errors %}
                        {{ form.product.as_widget(attrs={'class': 'form-control is-invalid'}) }}
                    {% else %}
                        {{ form.product }}
                    {% endif %}
                    {{ form.product.errors }}
                </div>
                <div class="form-group">
                    <label class="form-label" for="id_quantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
                    {% if form.quantity.errors %}
                        {{ form.quantity.as_widget(attrs={'class': 'form-control is-invalid'}) }}
                    {% else %}
                        {{ form.quantity }}
                    {% endif %}
                    {{ form.quantity.errors }}
                </div>
                <div class="form-group">
                    <label class="form-label" for="id_sold_at">–î–∞—Ç–∞ –ø—Ä–æ–¥–∞–∂–∏</label>
                    {% if form.sold_at.errors %}
                        {{ form.sold_at.as_widget(attrs={'class': 'form-control is-invalid'}) }}
                    {% else %}
                        {{ form.sold_at }}
                    {% endif %}
                    {{ form.sold_at.errors }}
                </div>
                <div class="form-actions">
                    <a class="btn btn-secondary" href="{% url 'sales:list' %}">–û—Ç–º–µ–Ω–∞</a>
                    <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            </form>
        </div>
    </div>
</main>

<!-- FOOTER -->
<footer class="footer">
    <div class="container">
        <div class="footer-bottom">
            ¬© 2025 SuRam ¬∑ –° –Ω–æ–≤–æ–≥–æ–¥–Ω–∏–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ–º ¬∑ üéÑ
        </div>
    </div>
</footer>

<script src="{% static 'js/main.js' %}"></script>
</body>
</html>
