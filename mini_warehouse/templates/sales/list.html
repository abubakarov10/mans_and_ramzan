{% load static %}
<!DOCTYPE html>
<html lang="ru" data-theme="newyear">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÑ SuRam - –ü—Ä–æ–¥–∞–∂–∏</title>

    <!-- Icons -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@700&family=Inter:wght@300;400;500;600;700&display=swap"
          rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/theme.css' %}">
</head>

<body data-theme="newyear">

<!-- Background -->
<div class="newyear-bg"></div>
<div class="snowflakes" id="snowflakes"></div>

<!-- NAVBAR -->
<nav class="navbar">
    <div class="container nav-container">
        <a href="{% url 'products:list' %}" class="logo">
            <div class="logo-icon">üéÑ</div>
            <div class="logo-text">SuRam <span class="year">2025</span></div>
        </a>

        <div class="desktop-menu">
            <ul class="nav-list">
                <li><a href="{% url 'products:list' %}" class="nav-link"><i class="fas fa-home"></i> –ì–ª–∞–≤–Ω–∞—è</a></li>
                <li><a href="{% url 'products:list' %}" class="nav-link"><i class="fas fa-boxes"></i> –¢–æ–≤–∞—Ä—ã</a></li>
                <li><a href="{% url 'sales:list' %}" class="nav-link active"><i class="fas fa-shopping-cart"></i> –ü—Ä–æ–¥–∞–∂–∏</a></li>
                <li><a href="{% url 'reports:profit' %}" class="nav-link"><i class="fas fa-chart-pie"></i> –û—Ç—á—ë—Ç—ã</a></li>
                <li>
                    <a href="{% url 'sales:create' %}" class="btn btn-danger">
                        <i class="fas fa-bolt"></i> –ù–æ–≤–∞—è –ø—Ä–æ–¥–∞–∂–∞
                    </a>
                </li>
            </ul>
        </div>

        <div class="mobile-menu">
            <button class="theme-toggle-mobile" id="themeToggleMobile">
                <i class="fas fa-palette"></i>
            </button>
            <button class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </div>
</nav>

<!-- MAIN -->
<main class="container">
    {% if messages %}
        <div class="card" style="margin-bottom: 20px;">
            {% for message in messages %}
                <div>{{ message }}</div>
            {% endfor %}
        </div>
    {% endif %}

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="page-header">
        <h1><i class="fas fa-shopping-cart"></i> –ü—Ä–æ–¥–∞–∂–∏</h1>
        <div class="search-box">
            <input type="text" class="form-control" placeholder="–ü–æ–∏—Å–∫ –ø—Ä–æ–¥–∞–∂...">
            <button class="btn btn-secondary">
                <i class="fas fa-search"></i>
            </button>
        </div>
    </div>

    <p class="page-subtitle">–ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –ø—Ä–æ–¥–∞–∂ ¬∑ –§–∏–ª—å—Ç—Ä—É–π—Ç–µ –ø–æ –¥–∞—Ç–∞–º –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞</p>

    <!-- –§–∏–ª—å—Ç—Ä—ã -->
    <form method="get" class="sales-filters">
        <div class="filter-group">
            <label class="filter-label">
                <i class="fas fa-calendar"></i> –î–∞—Ç–∞ —Å
            </label>
            {{ form.date_from }}
        </div>

        <div class="filter-group">
            <label class="filter-label">
                <i class="fas fa-calendar"></i> –î–∞—Ç–∞ –ø–æ
            </label>
            {{ form.date_to }}
        </div>

        <div class="filter-actions">
            <button class="btn btn-primary" type="submit">
                <i class="fas fa-filter"></i> –ü—Ä–∏–º–µ–Ω–∏—Ç—å
            </button>
            <a class="btn btn-secondary" href="{% url 'sales:list' %}">
                <i class="fas fa-redo"></i> –°–±—Ä–æ—Å–∏—Ç—å
            </a>
        </div>
    </form>

    <!-- –°–ø–∏—Å–æ–∫ –ø—Ä–æ–¥–∞–∂ -->
    <div class="card">
        <div class="card-header">
            <h3><i class="fas fa-history"></i> –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø—Ä–æ–¥–∞–∂–∏</h3>
            <div class="card-actions">
                <span class="badge">–í—Å–µ–≥–æ: {{ sales|length }} –ø—Ä–æ–¥–∞–∂</span>
            </div>
        </div>

        {% for sale in sales %}
            <div class="sale-list-item">
                <div class="sale-icon">üí∞</div>
                <div class="sale-info">
                    <div class="sale-number">–ü—Ä–æ–¥–∞–∂–∞ #{{ sale.id }}</div>
                    <div class="sale-product">{{ sale.product.name }}</div>
                    <div class="sale-date">{{ sale.sold_at|date:"d.m.Y" }}</div>
                </div>
                <div class="sale-details">
                    <div class="sale-quantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: {{ sale.quantity }} —à—Ç.</div>
                    <div class="sale-amount">‚ÇΩ {{ sale.total|floatformat:2 }}</div>
                    <span class="stock-badge stock-good">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</span>
                </div>
            </div>
        {% empty %}
            <div class="sale-list-item">
                <div class="sale-info">
                    <div class="sale-number">–ü—Ä–æ–¥–∞–∂ –Ω–µ—Ç</div>
                    <div class="sale-product">–ó–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –ø—Ä–æ–¥–∞–∂–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.</div>
                </div>
            </div>
        {% endfor %}
    </div>
</main>

<!-- FOOTER -->
<footer class="footer">
    <div class="container">
        <div class="footer-bottom">
            ¬© 2025 SuRam ¬∑ –° –Ω–æ–≤–æ–≥–æ–¥–Ω–∏–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ–º ¬∑ üéÑ
        </div>
    </div>
</footer>

<script src="{% static 'js/main.js' %}"></script>
</body>
</html>
